# Contains defaults that should be overridden by backend at runtime

# Store identity
store:
  id: ""          
  name: ""        
  namespace: ""   
  engine: ""     
  domain: ""      

# Ingress configuration
ingress:
  enabled: true
  className: "nginx"
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # cert-manager.io/cluster-issuer: letsencrypt-prod
  tls:
    enabled: false
    secretName: ""  # Will be auto-generated if not provided

# Secrets configuration
secrets:
  # Database credentials - will be auto-generated if not provided
  database:
    rootPassword: ""      # Auto-generated if empty
    username: "storeuser"
    password: ""          # Auto-generated if empty
    name: "storedb"
  
  # WordPress/Store admin credentials
  admin:
    username: "admin"
    password: ""          # Auto-generated if empty
    email: "admin@example.com"

# WooCommerce configuration
woocommerce:
  wordpress:
    image:
      repository: wordpress
      tag: "6.9.1-php8.3-apache"
      pullPolicy: IfNotPresent
    
    replicaCount: 1
    
    resources:
      requests:
        memory: "256Mi"
        cpu: "250m"
      limits:
        memory: "512Mi"
        cpu: "500m"
    
    persistence:
      enabled: true
      storageClass: ""  # Empty means use cluster default
      size: "2Gi"
      accessMode: "ReadWriteOnce"
    
    livenessProbe:
      httpGet:
        path: /wp-admin/install.php
        port: 80
      initialDelaySeconds: 120
      periodSeconds: 30
      timeoutSeconds: 10
      failureThreshold: 6
    
    readinessProbe:
      httpGet:
        path: /wp-admin/install.php
        port: 80
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    
    service:
      type: ClusterIP
      port: 80
      targetPort: 80
  
  mysql:
    image:
      repository: mysql
      tag: "9.6.0"
      pullPolicy: IfNotPresent
    
    resources:
      requests:
        memory: "256Mi"
        cpu: "250m"
      limits:
        memory: "512Mi"
        cpu: "500m"
    
    persistence:
      enabled: true
      storageClass: ""  # Empty means use cluster default
      size: "2Gi"
      accessMode: "ReadWriteOnce"
    
    livenessProbe:
      exec:
        command:
          - mysqladmin
          - ping
          - -h
          - localhost
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    
    readinessProbe:
      exec:
        command:
          - mysql
          - -h
          - localhost
          - -u
          - root
          - -p${MYSQL_ROOT_PASSWORD}
          - -e
          - "SELECT 1"
      initialDelaySeconds: 30
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 3
    
    service:
      type: ClusterIP
      port: 3306
      targetPort: 3306
  
  setupJob:
    image:
      repository: wordpress
      tag: "cli-2.12.0-php8.3"
      pullPolicy: IfNotPresent
    
    resources:
      requests:
        memory: "1.5Gi"    
        cpu: "750m"
      limits:
        memory: "3Gi"   
        cpu: "1500m"
    
    backoffLimit: 3
    ttlSecondsAfterFinished: 3600  # Clean up job 1 hour after completion

# Medusa configuration (stub for future implementation)
medusa:
  enabled: false

# Security context defaults
securityContext:
  runAsNonRoot: false  # WordPress/MySQL require specific users
  fsGroup: 33  # www-data group for WordPress
